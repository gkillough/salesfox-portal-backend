databaseChangeLog:
  - changeSet:
      id: test-data-create-user-1
      author: gavinkillough
      preConditions:
        - onFail: MARK_RAN
        - sqlCheck:
            expectedResult: 0
            sql: SELECT count(*) FROM portal.users WHERE email = 'basic.user@usepipeline.com';
      changes:
        - insert:
            schemaName: portal
            tableName: users
            columns:
              - column:
                  name: email
                  value: basic.user@usepipeline.com
              - column:
                  name: first_name
                  value: Basic
              - column:
                  name: last_name
                  value: User
              - column:
                  name: is_active
                  valueBoolean: true

  - changeSet:
      id: test-data-create-user-login-1
      author: gavinkillough
      preConditions:
        - onFail: MARK_RAN
        - sqlCheck:
            expectedResult: 0
            sql: SELECT count(*) FROM portal.logins WHERE user_id = GET_USER_ID_BY_EMAIL('basic.user@usepipeline.com');
      changes:
        - insert:
            schemaName: portal
            tableName: logins
            columns:
              - column:
                  name: user_id
                  valueComputed: GET_USER_ID_BY_EMAIL('basic.user@usepipeline.com')
              - column:
                  name: password_hash
                  value: $2a$08$j.QARNAT.eorZjsetIb/Ru/9T0aY2jprfoZgHJE09G9WvA/AACBxS
              - column:
                  name: num_failed_logins
                  valueNumeric: 0

  - changeSet:
      id: test-data-create-user-membership-1
      author: gavinkillough
      preConditions:
        - onFail: MARK_RAN
        - sqlCheck:
            expectedResult: 0
            sql: SELECT count(*) FROM portal.memberships WHERE user_id = GET_USER_ID_BY_EMAIL('basic.user@usepipeline.com');
      changes:
        - insert:
            schemaName: portal
            tableName: memberships
            columns:
              - column:
                  name: user_id
                  valueComputed: GET_USER_ID_BY_EMAIL('basic.user@usepipeline.com')
              - column:
                  name: organization_account_id
                  valueComputed: GET_ORGANIZATION_ACCOUNT_ID_BY_ORG_NAME_AND_ACCT_NAME('Salesfox for Individuals', 'Salesfox Basic')
              - column:
                  name: role_id
                  valueComputed: GET_ROLE_ID_BY_ROLE_LEVEL('PORTAL_BASIC_USER')

  - changeSet:
      id: test-data-create-user-address-1
      author: gavinkillough
      preConditions:
        - onFail: MARK_RAN
        - sqlCheck:
            expectedResult: 0
            sql: SELECT count(*) FROM portal.user_addresses WHERE user_id = GET_USER_ID_BY_EMAIL('basic.user@usepipeline.com');
      changes:
        - insert:
            schemaName: portal
            tableName: user_addresses
            columns:
              - column:
                  name: user_id
                  valueComputed: GET_USER_ID_BY_EMAIL('basic.user@usepipeline.com')
              - column:
                  name: address_line_1
                  value: 123 Sesame Street
              - column:
                  name: address_line_2
                  value: Suite A
              - column:
                  name: city
                  value: New York
              - column:
                  name: state
                  value: NY
              - column:
                  name: zip_code
                  value: 10001
              - column:
                  name: is_business
                  valueBoolean: true

  - changeSet:
      id: test-data-create-user-profile-1
      author: gavinkillough
      preConditions:
        - onFail: MARK_RAN
        - sqlCheck:
            expectedResult: 0
            sql: SELECT count(*) FROM portal.user_profiles WHERE user_id = GET_USER_ID_BY_EMAIL('basic.user@usepipeline.com');
      changes:
        - insert:
            schemaName: portal
            tableName: user_profiles
            columns:
              - column:
                  name: user_id
                  valueComputed: GET_USER_ID_BY_EMAIL('basic.user@usepipeline.com')
              - column:
                  name: mobile_number
                  valueComputed: 5555550001
              - column:
                  name: business_number
                  valueComputed: 5555550002

  - changeSet:
      id: test-data-create-user-inventory-1
      author: gavinkillough
      preConditions:
        - onFail: MARK_RAN
        - sqlCheck:
            expectedResult: 0
            sql: SELECT count(*) FROM portal.inventories WHERE inventory_id = '1a0c6260-712e-4753-9cf4-4eb80faf8b50';
      changes:
        - insert:
            schemaName: portal
            tableName: inventories
            columns:
              - column:
                  name: inventory_id
                  value: 1a0c6260-712e-4753-9cf4-4eb80faf8b50

  - changeSet:
      id: test-data-create-user-inventory-restriction-1
      author: gavinkillough
      preConditions:
        - onFail: MARK_RAN
        - sqlCheck:
            expectedResult: 0
            sql: SELECT count(*) FROM portal.inventory_user_restrictions WHERE user_id = GET_USER_ID_BY_EMAIL('basic.user@usepipeline.com');
      changes:
        - insert:
            schemaName: portal
            tableName: inventory_user_restrictions
            columns:
              - column:
                  name: inventory_id
                  value: 1a0c6260-712e-4753-9cf4-4eb80faf8b50
              - column:
                  name: user_id
                  valueComputed: GET_USER_ID_BY_EMAIL('basic.user@usepipeline.com')

  - changeSet:
      id: test-data-create-user-2
      author: gavinkillough
      preConditions:
        - onFail: MARK_RAN
        - sqlCheck:
            expectedResult: 0
            sql: SELECT count(*) FROM portal.users WHERE email = 'premium.user@usepipeline.com';
      changes:
        - insert:
            schemaName: portal
            tableName: users
            columns:
              - column:
                  name: email
                  value: premium.user@usepipeline.com
              - column:
                  name: first_name
                  value: Premium
              - column:
                  name: last_name
                  value: User
              - column:
                  name: is_active
                  valueBoolean: true

  - changeSet:
      id: test-data-create-user-login-2
      author: gavinkillough
      preConditions:
        - onFail: MARK_RAN
        - sqlCheck:
            expectedResult: 0
            sql: SELECT count(*) FROM portal.logins WHERE user_id = GET_USER_ID_BY_EMAIL('premium.user@usepipeline.com');
      changes:
        - insert:
            schemaName: portal
            tableName: logins
            columns:
              - column:
                  name: user_id
                  valueComputed: GET_USER_ID_BY_EMAIL('premium.user@usepipeline.com')
              - column:
                  name: password_hash
                  value: $2a$08$j.QARNAT.eorZjsetIb/Ru/9T0aY2jprfoZgHJE09G9WvA/AACBxS
              - column:
                  name: num_failed_logins
                  valueNumeric: 0

  - changeSet:
      id: test-data-create-user-membership-2
      author: gavinkillough
      preConditions:
        - onFail: MARK_RAN
        - sqlCheck:
            expectedResult: 0
            sql: SELECT count(*) FROM portal.memberships WHERE user_id = GET_USER_ID_BY_EMAIL('premium.user@usepipeline.com');
      changes:
        - insert:
            schemaName: portal
            tableName: memberships
            columns:
              - column:
                  name: user_id
                  valueComputed: GET_USER_ID_BY_EMAIL('premium.user@usepipeline.com')
              - column:
                  name: organization_account_id
                  valueComputed: GET_ORGANIZATION_ACCOUNT_ID_BY_ORG_NAME_AND_ACCT_NAME('Salesfox for Individuals', 'Salesfox Premium')
              - column:
                  name: role_id
                  valueComputed: GET_ROLE_ID_BY_ROLE_LEVEL('PORTAL_PREMIUM_USER')

  - changeSet:
      id: test-data-create-user-address-2
      author: gavinkillough
      preConditions:
        - onFail: MARK_RAN
        - sqlCheck:
            expectedResult: 0
            sql: SELECT count(*) FROM portal.user_addresses WHERE user_id = GET_USER_ID_BY_EMAIL('premium.user@usepipeline.com');
      changes:
        - insert:
            schemaName: portal
            tableName: user_addresses
            columns:
              - column:
                  name: user_id
                  valueComputed: GET_USER_ID_BY_EMAIL('premium.user@usepipeline.com')
              - column:
                  name: address_line_1
                  value: 1024 Main Street
              - column:
                  name: address_line_2
                  value: Unit 5
              - column:
                  name: city
                  value: New York
              - column:
                  name: state
                  value: NY
              - column:
                  name: zip_code
                  value: 10002
              - column:
                  name: is_business
                  valueBoolean: false

  - changeSet:
      id: test-data-create-user-profile-2
      author: gavinkillough
      preConditions:
        - onFail: MARK_RAN
        - sqlCheck:
            expectedResult: 0
            sql: SELECT count(*) FROM portal.user_profiles WHERE user_id = GET_USER_ID_BY_EMAIL('premium.user@usepipeline.com');
      changes:
        - insert:
            schemaName: portal
            tableName: user_profiles
            columns:
              - column:
                  name: user_id
                  valueComputed: GET_USER_ID_BY_EMAIL('premium.user@usepipeline.com')
              - column:
                  name: mobile_number
                  valueComputed: 5555550003
              - column:
                  name: business_number
                  valueComputed: 5555550004

  - changeSet:
      id: test-data-create-user-inventory-2
      author: gavinkillough
      preConditions:
        - onFail: MARK_RAN
        - sqlCheck:
            expectedResult: 0
            sql: SELECT count(*) FROM portal.inventories WHERE inventory_id = '6d57f19b-c14a-4dcd-bc25-6b92ee8b6852';
      changes:
        - insert:
            schemaName: portal
            tableName: inventories
            columns:
              - column:
                  name: inventory_id
                  value: 6d57f19b-c14a-4dcd-bc25-6b92ee8b6852

  - changeSet:
      id: test-data-create-user-inventory-restriction-2
      author: gavinkillough
      preConditions:
        - onFail: MARK_RAN
        - sqlCheck:
            expectedResult: 0
            sql: SELECT count(*) FROM portal.inventory_user_restrictions WHERE user_id = GET_USER_ID_BY_EMAIL('premium.user@usepipeline.com');
      changes:
        - insert:
            schemaName: portal
            tableName: inventory_user_restrictions
            columns:
              - column:
                  name: inventory_id
                  value: 6d57f19b-c14a-4dcd-bc25-6b92ee8b6852
              - column:
                  name: user_id
                  valueComputed: GET_USER_ID_BY_EMAIL('premium.user@usepipeline.com')

  - changeSet:
      id: test-data-create-user-3
      author: gavinkillough
      preConditions:
        - onFail: MARK_RAN
        - sqlCheck:
            expectedResult: 0
            sql: SELECT count(*) FROM portal.users WHERE email = 'admin@usepipeline.com';
      changes:
        - insert:
            schemaName: portal
            tableName: users
            columns:
              - column:
                  name: email
                  value: admin@usepipeline.com
              - column:
                  name: first_name
                  value: Admin
              - column:
                  name: last_name
                  value: User
              - column:
                  name: is_active
                  valueBoolean: true

  - changeSet:
      id: test-data-create-user-login-3
      author: gavinkillough
      preConditions:
        - onFail: MARK_RAN
        - sqlCheck:
            expectedResult: 0
            sql: SELECT count(*) FROM portal.logins WHERE user_id = GET_USER_ID_BY_EMAIL('admin@usepipeline.com');
      changes:
        - insert:
            schemaName: portal
            tableName: logins
            columns:
              - column:
                  name: user_id
                  valueComputed: GET_USER_ID_BY_EMAIL('admin@usepipeline.com')
              - column:
                  name: password_hash
                  value: $2a$08$j.QARNAT.eorZjsetIb/Ru/9T0aY2jprfoZgHJE09G9WvA/AACBxS
              - column:
                  name: num_failed_logins
                  valueNumeric: 0

  - changeSet:
      id: test-data-create-user-membership-3
      author: gavinkillough
      preConditions:
        - onFail: MARK_RAN
        - sqlCheck:
            expectedResult: 0
            sql: SELECT count(*) FROM portal.memberships WHERE user_id = GET_USER_ID_BY_EMAIL('admin@usepipeline.com');
      changes:
        - insert:
            schemaName: portal
            tableName: memberships
            columns:
              - column:
                  name: user_id
                  valueComputed: GET_USER_ID_BY_EMAIL('admin@usepipeline.com')
              - column:
                  name: organization_account_id
                  valueComputed: GET_ORGANIZATION_ACCOUNT_ID_BY_ORG_NAME_AND_ACCT_NAME('Salesfox Organization', 'Salesfox Team')
              - column:
                  name: role_id
                  valueComputed: GET_ROLE_ID_BY_ROLE_LEVEL('PORTAL_ADMIN')

  - changeSet:
      id: test-data-create-user-address-3
      author: gavinkillough
      preConditions:
        - onFail: MARK_RAN
        - sqlCheck:
            expectedResult: 0
            sql: SELECT count(*) FROM portal.user_addresses WHERE user_id = GET_USER_ID_BY_EMAIL('admin@usepipeline.com');
      changes:
        - insert:
            schemaName: portal
            tableName: user_addresses
            columns:
              - column:
                  name: user_id
                  valueComputed: GET_USER_ID_BY_EMAIL('admin@usepipeline.com')
              - column:
                  name: address_line_1
                  value: 42 West Blvd
              - column:
                  name: address_line_2
                  value: ''
              - column:
                  name: city
                  value: New York
              - column:
                  name: state
                  value: NY
              - column:
                  name: zip_code
                  value: 10003
              - column:
                  name: is_business
                  valueBoolean: false

  - changeSet:
      id: test-data-create-user-profile-3
      author: gavinkillough
      preConditions:
        - onFail: MARK_RAN
        - sqlCheck:
            expectedResult: 0
            sql: SELECT count(*) FROM portal.user_profiles WHERE user_id = GET_USER_ID_BY_EMAIL('admin@usepipeline.com');
      changes:
        - insert:
            schemaName: portal
            tableName: user_profiles
            columns:
              - column:
                  name: user_id
                  valueComputed: GET_USER_ID_BY_EMAIL('admin@usepipeline.com')
              - column:
                  name: mobile_number
                  valueComputed: 5555550005
              - column:
                  name: business_number
                  valueComputed: 5555550006
