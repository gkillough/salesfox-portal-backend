databaseChangeLog:
  - changeSet:
      id: note-fk-updates-1
      author: gavinkillough
      changes:
        - dropForeignKeyConstraint:
            baseTableSchemaName: portal
            baseTableName: notes
            constraintName: notes_updated_by_user_id_fk
        - addForeignKeyConstraint:
            constraintName: notes_updated_by_user_id_fk
            baseTableSchemaName: portal
            baseTableName: notes
            baseColumnNames: updated_by_user_id
            referencedTableSchemaName: portal
            referencedTableName: users
            referencedColumnNames: user_id
            onDelete: RESTRICT
            onUpdate: CASCADE
            validate: true

  - changeSet:
      id: note-fk-updates-2
      author: gavinkillough
      changes:
        - dropForeignKeyConstraint:
            baseTableSchemaName: portal
            baseTableName: note_organization_account_restrictions
            constraintName: note_org_acct_restrictions_note_id_fk
        - addForeignKeyConstraint:
            constraintName: note_org_acct_restrictions_note_id_fk
            baseTableSchemaName: portal
            baseTableName: note_organization_account_restrictions
            baseColumnNames: note_id
            referencedTableSchemaName: portal
            referencedTableName: notes
            referencedColumnNames: note_id
            onDelete: CASCADE
            onUpdate: CASCADE
            validate: true
        - dropForeignKeyConstraint:
            baseTableSchemaName: portal
            baseTableName: note_organization_account_restrictions
            constraintName: note_org_acct_restrictions_org_acct_id_fk
        - addForeignKeyConstraint:
            constraintName: note_org_acct_restrictions_org_acct_id_fk
            baseTableSchemaName: portal
            baseTableName: note_organization_account_restrictions
            baseColumnNames: organization_account_id
            referencedTableSchemaName: portal
            referencedTableName: organization_accounts
            referencedColumnNames: organization_account_id
            onDelete: RESTRICT
            onUpdate: CASCADE
            validate: true

  - changeSet:
      id: note-fk-updates-3
      author: gavinkillough
      changes:
        - dropForeignKeyConstraint:
            baseTableSchemaName: portal
            baseTableName: note_user_restrictions
            constraintName: note_user_restrictions_note_id_fk
        - addForeignKeyConstraint:
            constraintName: note_user_restrictions_note_id_fk
            baseTableSchemaName: portal
            baseTableName: note_user_restrictions
            baseColumnNames: note_id
            referencedTableSchemaName: portal
            referencedTableName: notes
            referencedColumnNames: note_id
            onDelete: CASCADE
            onUpdate: CASCADE
            validate: true
        - dropForeignKeyConstraint:
            baseTableSchemaName: portal
            baseTableName: note_user_restrictions
            constraintName: note_user_restrictions_user_id_id_fk
        - addForeignKeyConstraint:
            constraintName: note_user_restrictions_user_id_fk
            baseTableSchemaName: portal
            baseTableName: note_user_restrictions
            baseColumnNames: user_id
            referencedTableSchemaName: portal
            referencedTableName: users
            referencedColumnNames: user_id
            onDelete: RESTRICT
            onUpdate: CASCADE
            validate: true

  - changeSet:
      id: note-fk-updates-4
      author: gavinkillough
      changes:
        - dropForeignKeyConstraint:
            baseTableSchemaName: portal
            baseTableName: note_credit_organization_account_restrictions
            constraintName: note_credit_org_acct_restrictions_note_credit_id_fk
        - addForeignKeyConstraint:
            constraintName: note_credit_org_acct_restrictions_note_credit_id_fk
            baseTableSchemaName: portal
            baseTableName: note_credit_organization_account_restrictions
            baseColumnNames: note_credit_id
            referencedTableSchemaName: portal
            referencedTableName: note_credits
            referencedColumnNames: note_credit_id
            onDelete: CASCADE
            onUpdate: CASCADE
            validate: true
        - dropForeignKeyConstraint:
            baseTableSchemaName: portal
            baseTableName: note_credit_organization_account_restrictions
            constraintName: note_credit_org_acct_restrictions_org_acct_id_fk
        - addForeignKeyConstraint:
            constraintName: note_credit_org_acct_restrictions_org_acct_id_fk
            baseTableSchemaName: portal
            baseTableName: note_credit_organization_account_restrictions
            baseColumnNames: organization_account_id
            referencedTableSchemaName: portal
            referencedTableName: organization_accounts
            referencedColumnNames: organization_account_id
            onDelete: RESTRICT
            onUpdate: CASCADE
            validate: true

  - changeSet:
      id: note-fk-updates-5
      author: gavinkillough
      changes:
        - dropForeignKeyConstraint:
            baseTableSchemaName: portal
            baseTableName: note_credit_user_restrictions
            constraintName: note_credit_user_restrictions_note_credit_id_fk
        - addForeignKeyConstraint:
            constraintName: note_credit_user_restrictions_note_credit_id_fk
            baseTableSchemaName: portal
            baseTableName: note_credit_user_restrictions
            baseColumnNames: note_credit_id
            referencedTableSchemaName: portal
            referencedTableName: note_credits
            referencedColumnNames: note_credit_id
            onDelete: CASCADE
            onUpdate: CASCADE
            validate: true
        - dropForeignKeyConstraint:
            baseTableSchemaName: portal
            baseTableName: note_credit_user_restrictions
            constraintName: note_credit_user_restrictions_user_id_fk
        - addForeignKeyConstraint:
            constraintName: note_credit_user_restrictions_user_id_fk
            baseTableSchemaName: portal
            baseTableName: note_credit_user_restrictions
            baseColumnNames: user_id
            referencedTableSchemaName: portal
            referencedTableName: users
            referencedColumnNames: user_id
            onDelete: RESTRICT
            onUpdate: CASCADE
            validate: true
