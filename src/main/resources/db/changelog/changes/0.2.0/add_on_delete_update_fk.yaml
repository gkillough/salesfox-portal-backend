databaseChangeLog:
  - changeSet:
      id: add-fk-1
      author: gavinkillough
      changes:
        - addForeignKeyConstraint:
            constraintName: logins_user_id_fk
            baseTableSchemaName: portal
            baseTableName: logins
            baseColumnNames: user_id
            referencedTableSchemaName: portal
            referencedTableName: users
            referencedColumnNames: user_id
            onDelete: RESTRICT
            onUpdate: CASCADE
            validate: true

  - changeSet:
      id: add-fk-2
      author: gavinkillough
      changes:
        - addForeignKeyConstraint:
            constraintName: memberships_user_id_fk
            baseTableSchemaName: portal
            baseTableName: memberships
            baseColumnNames: user_id
            referencedTableSchemaName: portal
            referencedTableName: users
            referencedColumnNames: user_id
            onDelete: RESTRICT
            onUpdate: CASCADE
            validate: true
        - addForeignKeyConstraint:
            constraintName: memberships_role_id_fk
            baseTableSchemaName: portal
            baseTableName: memberships
            baseColumnNames: role_id
            referencedTableSchemaName: portal
            referencedTableName: roles
            referencedColumnNames: role_id
            onDelete: RESTRICT
            onUpdate: CASCADE
            validate: true
        - addForeignKeyConstraint:
            constraintName: memberships_organization_account_id_fk
            baseTableSchemaName: portal
            baseTableName: memberships
            baseColumnNames: organization_account_id
            referencedTableSchemaName: portal
            referencedTableName: organization_accounts
            referencedColumnNames: organization_account_id
            onDelete: RESTRICT
            onUpdate: CASCADE
            validate: true

  - changeSet:
      id: add-fk-3
      author: gavinkillough
      changes:
        - addForeignKeyConstraint:
            constraintName: user_profiles_user_id_fk
            baseTableSchemaName: portal
            baseTableName: user_profiles
            baseColumnNames: user_id
            referencedTableSchemaName: portal
            referencedTableName: users
            referencedColumnNames: user_id
            onDelete: CASCADE
            onUpdate: CASCADE
            validate: true

  - changeSet:
      id: add-fk-4
      author: gavinkillough
      changes:
        - addForeignKeyConstraint:
            constraintName: organization_accounts_organization_id_fk
            baseTableSchemaName: portal
            baseTableName: organization_accounts
            baseColumnNames: organization_id
            referencedTableSchemaName: portal
            referencedTableName: organizations
            referencedColumnNames: organization_id
            onDelete: RESTRICT
            onUpdate: CASCADE
            validate: true

  - changeSet:
      id: add-fk-5
      author: gavinkillough
      changes:
        - dropForeignKeyConstraint:
            baseTableSchemaName: portal
            baseTableName: organization_account_addresses
            constraintName: organization_account_id_fk
        - addForeignKeyConstraint:
            constraintName: org_acct_addresses_org_acct_id_fk
            baseTableSchemaName: portal
            baseTableName: organization_account_addresses
            baseColumnNames: organization_account_id
            referencedTableSchemaName: portal
            referencedTableName: organization_accounts
            referencedColumnNames: organization_account_id
            onDelete: CASCADE
            onUpdate: CASCADE
            validate: true

  - changeSet:
      id: add-fk-6
      author: gavinkillough
      changes:
        - dropForeignKeyConstraint:
            baseTableSchemaName: portal
            baseTableName: user_addresses
            constraintName: user_id_fk
        - addForeignKeyConstraint:
            constraintName: user_acct_addresses_user_id_fk
            baseTableSchemaName: portal
            baseTableName: user_addresses
            baseColumnNames: user_id
            referencedTableSchemaName: portal
            referencedTableName: users
            referencedColumnNames: user_id
            onDelete: CASCADE
            onUpdate: CASCADE
            validate: true

  - changeSet:
      id: add-fk-7
      author: gavinkillough
      changes:
        - dropForeignKeyConstraint:
            baseTableSchemaName: portal
            baseTableName: organization_account_profiles
            constraintName: organization_account_profile_organization_account_id_fk
        - addForeignKeyConstraint:
            constraintName: org_acct_profiles_org_acct_id_fk
            baseTableSchemaName: portal
            baseTableName: organization_account_profiles
            baseColumnNames: organization_account_id
            referencedTableSchemaName: portal
            referencedTableName: organization_accounts
            referencedColumnNames: organization_account_id
            onDelete: CASCADE
            onUpdate: CASCADE
            validate: true

  - changeSet:
      id: add-fk-8
      author: gavinkillough
      changes:
        - dropForeignKeyConstraint:
            baseTableSchemaName: portal
            baseTableName: organization_account_invite_tokens
            constraintName: organization_account_invite_organization_account_id_fk
        - addForeignKeyConstraint:
            constraintName: org_acct_invite_tokens_org_acct_id_fk
            baseTableSchemaName: portal
            baseTableName: organization_account_invite_tokens
            baseColumnNames: organization_account_id
            referencedTableSchemaName: portal
            referencedTableName: organization_accounts
            referencedColumnNames: organization_account_id
            onDelete: CASCADE
            onUpdate: CASCADE
            validate: true

  - changeSet:
      id: add-fk-9
      author: gavinkillough
      changes:
        - dropForeignKeyConstraint:
            baseTableSchemaName: portal
            baseTableName: organization_account_contact_addresses
            constraintName: organization_account_contact_addresses_contact_id_fk
        - addForeignKeyConstraint:
            constraintName: org_acct_contact_addresses_contact_id_fk
            baseTableSchemaName: portal
            baseTableName: organization_account_contact_addresses
            baseColumnNames: contact_id
            referencedTableSchemaName: portal
            referencedTableName: organization_account_contacts
            referencedColumnNames: contact_id
            onDelete: CASCADE
            onUpdate: CASCADE
            validate: true

  - changeSet:
      id: add-fk-10
      author: gavinkillough
      changes:
        - dropForeignKeyConstraint:
            baseTableSchemaName: portal
            baseTableName: contact_interactions
            constraintName: contact_interactions_contact_id_fk
        - addForeignKeyConstraint:
            constraintName: contact_interactions_contact_id_fk
            baseTableSchemaName: portal
            baseTableName: contact_interactions
            baseColumnNames: contact_id
            referencedTableSchemaName: portal
            referencedTableName: organization_account_contacts
            referencedColumnNames: contact_id
            onDelete: CASCADE
            onUpdate: CASCADE
            validate: true
        - dropForeignKeyConstraint:
            baseTableSchemaName: portal
            baseTableName: contact_interactions
            constraintName: contact_interactions_interacting_user_id_fk
        - addForeignKeyConstraint:
            constraintName: contact_interactions_interacting_user_id_fk
            baseTableSchemaName: portal
            baseTableName: contact_interactions
            baseColumnNames: interacting_user_id
            referencedTableSchemaName: portal
            referencedTableName: users
            referencedColumnNames: user_id
            onDelete: RESTRICT
            onUpdate: CASCADE
            validate: true

  - changeSet:
      id: add-fk-11
      author: gavinkillough
      changes:
        - dropForeignKeyConstraint:
            baseTableSchemaName: portal
            baseTableName: organization_account_contact_profiles
            constraintName: org_acct_contact_profiles_org_point_of_contact_fk
        - addForeignKeyConstraint:
            constraintName: org_acct_contact_profiles_org_point_of_contact_fk
            baseTableSchemaName: portal
            baseTableName: organization_account_contact_profiles
            baseColumnNames: organization_point_of_contact_user_id
            referencedTableSchemaName: portal
            referencedTableName: users
            referencedColumnNames: user_id
            onDelete: RESTRICT
            onUpdate: CASCADE
            validate: true
        - dropForeignKeyConstraint:
            baseTableSchemaName: portal
            baseTableName: organization_account_contact_profiles
            constraintName: organization_account_contact_profiles_contact_id_fk
        - addForeignKeyConstraint:
            constraintName: org_acct_contact_profiles_contact_id_fk
            baseTableSchemaName: portal
            baseTableName: organization_account_contact_profiles
            baseColumnNames: contact_id
            referencedTableSchemaName: portal
            referencedTableName: organization_account_contacts
            referencedColumnNames: contact_id
            onDelete: CASCADE
            onUpdate: CASCADE
            validate: true

  - changeSet:
      id: add-fk-12
      author: gavinkillough
      changes:
        - dropForeignKeyConstraint:
            baseTableSchemaName: portal
            baseTableName: catalogue_item_organization_account_restrictions
            constraintName: catalog_item_org_acct_restrictions_item_id_fk
        - addForeignKeyConstraint:
            constraintName: catalog_item_org_acct_restrictions_item_id_fk
            baseTableSchemaName: portal
            baseTableName: catalogue_item_organization_account_restrictions
            baseColumnNames: item_id
            referencedTableSchemaName: portal
            referencedTableName: catalogue_items
            referencedColumnNames: item_id
            onDelete: CASCADE
            onUpdate: CASCADE
            validate: true
        - dropForeignKeyConstraint:
            baseTableSchemaName: portal
            baseTableName: catalogue_item_organization_account_restrictions
            constraintName: catalog_item_org_acct_restrictions_org_account_id_fk
        - addForeignKeyConstraint:
            constraintName: catalog_item_org_acct_restrictions_org_account_id_fk
            baseTableSchemaName: portal
            baseTableName: catalogue_item_organization_account_restrictions
            baseColumnNames: organization_account_id
            referencedTableSchemaName: portal
            referencedTableName: organization_accounts
            referencedColumnNames: organization_account_id
            onDelete: RESTRICT
            onUpdate: CASCADE
            validate: true

  - changeSet:
      id: add-fk-13
      author: gavinkillough
      changes:
        - dropForeignKeyConstraint:
            baseTableSchemaName: portal
            baseTableName: catalogue_item_user_restrictions
            constraintName: catalogue_item_user_restrictions_item_id_fk
        - addForeignKeyConstraint:
            constraintName: catalogue_item_user_restrictions_item_id_fk
            baseTableSchemaName: portal
            baseTableName: catalogue_item_user_restrictions
            baseColumnNames: item_id
            referencedTableSchemaName: portal
            referencedTableName: catalogue_items
            referencedColumnNames: item_id
            onDelete: CASCADE
            onUpdate: CASCADE
            validate: true
        - dropForeignKeyConstraint:
            baseTableSchemaName: portal
            baseTableName: catalogue_item_user_restrictions
            constraintName: catalogue_item_user_restrictions_user_id_fk
        - addForeignKeyConstraint:
            constraintName: catalogue_item_user_restrictions_user_id_fk
            baseTableSchemaName: portal
            baseTableName: catalogue_item_user_restrictions
            baseColumnNames: user_id
            referencedTableSchemaName: portal
            referencedTableName: users
            referencedColumnNames: user_id
            onDelete: RESTRICT
            onUpdate: CASCADE
            validate: true

  - changeSet:
      id: add-fk-14
      author: gavinkillough
      changes:
        - dropForeignKeyConstraint:
            baseTableSchemaName: portal
            baseTableName: inventory_organization_account_restrictions
            constraintName: inventory_org_acct_restrictions_inventory_id_fk
        - addForeignKeyConstraint:
            constraintName: inventory_org_acct_restrictions_inventory_id_fk
            baseTableSchemaName: portal
            baseTableName: inventory_organization_account_restrictions
            baseColumnNames: inventory_id
            referencedTableSchemaName: portal
            referencedTableName: inventories
            referencedColumnNames: inventory_id
            onDelete: CASCADE
            onUpdate: CASCADE
            validate: true
        - dropForeignKeyConstraint:
            baseTableSchemaName: portal
            baseTableName: inventory_organization_account_restrictions
            constraintName: inventory_org_acct_restrictions_org_acct_id_fk
        - addForeignKeyConstraint:
            constraintName: inventory_org_acct_restrictions_org_acct_id_fk
            baseTableSchemaName: portal
            baseTableName: inventory_organization_account_restrictions
            baseColumnNames: organization_account_id
            referencedTableSchemaName: portal
            referencedTableName: organization_accounts
            referencedColumnNames: organization_account_id
            onDelete: RESTRICT
            onUpdate: CASCADE
            validate: true

  - changeSet:
      id: add-fk-15
      author: gavinkillough
      changes:
        - dropForeignKeyConstraint:
            baseTableSchemaName: portal
            baseTableName: inventory_user_restrictions
            constraintName: inventory_user_restrictions_inventory_id_fk
        - addForeignKeyConstraint:
            constraintName: inventory_user_restrictions_inventory_id_fk
            baseTableSchemaName: portal
            baseTableName: inventory_user_restrictions
            baseColumnNames: inventory_id
            referencedTableSchemaName: portal
            referencedTableName: inventories
            referencedColumnNames: inventory_id
            onDelete: CASCADE
            onUpdate: CASCADE
            validate: true
        - dropForeignKeyConstraint:
            baseTableSchemaName: portal
            baseTableName: inventory_user_restrictions
            constraintName: inventory_user_restrictions_user_id_fk
        - addForeignKeyConstraint:
            constraintName: inventory_user_restrictions_user_id_fk
            baseTableSchemaName: portal
            baseTableName: inventory_user_restrictions
            baseColumnNames: user_id
            referencedTableSchemaName: portal
            referencedTableName: users
            referencedColumnNames: user_id
            onDelete: RESTRICT
            onUpdate: CASCADE
            validate: true

  - changeSet:
      id: add-fk-16
      author: gavinkillough
      changes:
        - dropForeignKeyConstraint:
            baseTableSchemaName: portal
            baseTableName: inventory_items
            constraintName: inventory_items_catalogue_item_id_fk
        - addForeignKeyConstraint:
            constraintName: inventory_items_catalogue_item_id_fk
            baseTableSchemaName: portal
            baseTableName: inventory_items
            baseColumnNames: catalogue_item_id
            referencedTableSchemaName: portal
            referencedTableName: catalogue_items
            referencedColumnNames: item_id
            onDelete: RESTRICT
            onUpdate: CASCADE
            validate: true
        - dropForeignKeyConstraint:
            baseTableSchemaName: portal
            baseTableName: inventory_items
            constraintName: inventory_items_inventory_id_fk
        - addForeignKeyConstraint:
            constraintName: inventory_items_inventory_id_fk
            baseTableSchemaName: portal
            baseTableName: inventory_items
            baseColumnNames: inventory_id
            referencedTableSchemaName: portal
            referencedTableName: inventories
            referencedColumnNames: inventory_id
            onDelete: RESTRICT
            onUpdate: CASCADE
            validate: true

  - changeSet:
      id: add-fk-17
      author: gavinkillough
      changes:
        - dropForeignKeyConstraint:
            baseTableSchemaName: portal
            baseTableName: order_requests
            constraintName: order_requests_catalogue_item_id_fk
        - addForeignKeyConstraint:
            constraintName: order_requests_catalogue_item_id_fk
            baseTableSchemaName: portal
            baseTableName: order_requests
            baseColumnNames: catalogue_item_id
            referencedTableSchemaName: portal
            referencedTableName: catalogue_items
            referencedColumnNames: item_id
            onDelete: SET NULL
            onUpdate: CASCADE
            validate: true
        - dropForeignKeyConstraint:
            baseTableSchemaName: portal
            baseTableName: order_requests
            constraintName: order_requests_inventory_id_fk
        - addForeignKeyConstraint:
            constraintName: order_requests_inventory_id_fk
            baseTableSchemaName: portal
            baseTableName: order_requests
            baseColumnNames: inventory_id
            referencedTableSchemaName: portal
            referencedTableName: inventories
            referencedColumnNames: inventory_id
            onDelete: SET NULL
            onUpdate: CASCADE
            validate: true
        - dropForeignKeyConstraint:
            baseTableSchemaName: portal
            baseTableName: order_requests
            constraintName: order_requests_org_account_id_fk
        - addForeignKeyConstraint:
            constraintName: order_requests_org_account_id_fk
            baseTableSchemaName: portal
            baseTableName: order_requests
            baseColumnNames: organization_account_id
            referencedTableSchemaName: portal
            referencedTableName: organization_accounts
            referencedColumnNames: organization_account_id
            onDelete: RESTRICT
            onUpdate: CASCADE
            validate: true
        - dropForeignKeyConstraint:
            baseTableSchemaName: portal
            baseTableName: order_requests
            constraintName: order_requests_user_id_fk
        - addForeignKeyConstraint:
            constraintName: order_requests_user_id_fk
            baseTableSchemaName: portal
            baseTableName: order_requests
            baseColumnNames: user_id
            referencedTableSchemaName: portal
            referencedTableName: users
            referencedColumnNames: user_id
            onDelete: RESTRICT
            onUpdate: CASCADE
            validate: true
        - dropForeignKeyConstraint:
            baseTableSchemaName: portal
            baseTableName: order_requests
            constraintName: order_requests_requesting_user_id_fk
        - addForeignKeyConstraint:
            constraintName: order_requests_requesting_user_id_fk
            baseTableSchemaName: portal
            baseTableName: order_requests
            baseColumnNames: requesting_user_id
            referencedTableSchemaName: portal
            referencedTableName: users
            referencedColumnNames: user_id
            onDelete: SET NULL
            onUpdate: CASCADE
            validate: true

  - changeSet:
      id: add-fk-18
      author: gavinkillough
      changes:
        - addForeignKeyConstraint:
            constraintName: order_request_statuses_order_id_fk
            baseTableSchemaName: portal
            baseTableName: order_request_statuses
            baseColumnNames: order_id
            referencedTableSchemaName: portal
            referencedTableName: order_requests
            referencedColumnNames: order_id
            onDelete: CASCADE
            onUpdate: CASCADE
            validate: true
        - dropForeignKeyConstraint:
            baseTableSchemaName: portal
            baseTableName: order_request_statuses
            constraintName: order_request_statuses_changed_by_user_id_fk
        - addForeignKeyConstraint:
            constraintName: order_request_statuses_changed_by_user_id_fk
            baseTableSchemaName: portal
            baseTableName: order_request_statuses
            baseColumnNames: changed_by_user_id
            referencedTableSchemaName: portal
            referencedTableName: users
            referencedColumnNames: user_id
            onDelete: SET NULL
            onUpdate: CASCADE
            validate: true
